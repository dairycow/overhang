[tox]
envlist = py311,lint,format,type
skipsdist = false

[testenv]
deps =
    pytest>=7.4.0
    pytest-asyncio>=0.21.0
    pytest-cov>=4.1.0
    httpx>=0.25.0
commands =
    pytest {posargs}

[testenv:dev]
deps =
    {[testenv]deps}
commands =
    uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

[testenv:lint]
deps =
    ruff>=0.1.7
commands =
    ruff check src tests

[testenv:format]
deps =
    black>=23.12.0
    ruff>=0.1.7
commands =
    black src tests
    ruff check --fix src tests

[testenv:type]
deps =
    mypy>=1.7.0
commands =
    mypy src

[testenv:seed]
deps =
commands =
    python scripts/seed_locations.py

[testenv:seed-test]
deps =
commands =
    python scripts/seed_locations.py
    python scripts/seed_test_users.py
    python scripts/seed_test_sessions.py

[tox]
envlist = py311,lint,format,type
skipsdist = false

[testenv]
deps =
    pytest>=7.4.0
    pytest-asyncio>=0.21.0
    pytest-cov>=4.1.0
    httpx>=0.25.0
commands =
    pytest {posargs}

[testenv:dev]
deps =
    {[testenv]deps}
commands =
    uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

[testenv:lint]
deps =
    ruff>=0.1.7
commands =
    ruff check app tests

[testenv:format]
deps =
    black>=23.12.0
    ruff>=0.1.7
commands =
    black app tests
    ruff check --fix app tests

[testenv:type]
deps =
    mypy>=1.7.0
commands =
    mypy app

[testenv:seed]
deps =
commands =
    python scripts/seed_locations.py
